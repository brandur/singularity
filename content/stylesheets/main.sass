$sans_serif: helvetica, arial, geneva, sans-serif
$serif: cardo, georgia, serif

$color_highlight: #222

$color_primary: #4d4d4d
$color_secondary: #5d5d5d

html
  // Root font size. All other sizes with "rem" are relative to this.
  font-size: 17px

  body
    background: #fff url("/assets/mountain-big.png") no-repeat
    color: $color_primary
    font-family: $sans_serif
    font-weight: 300
    line-height: 1.6em
    margin: 20px 30px

    // Smaller version -- also looks pretty cool and maybe better
    //background: #fff url("/assets/mountain.png") no-repeat
    //background-size: 600px 602px

  a
    color: $color_highlight
    text-decoration: underline

    &:hover
      text-decoration: none

    &:visited
      text-decoration: underline

  /*
   * Headers
   */

  h1, h2, h3, h4, h5, h6
    font-family: $sans_serif
    hyphens: auto
    -moz-hyphens: auto
    -webkit-hyphens: auto
    line-height: 1em

    a, a:visited
      text-decoration: none

  h1
    color: $color_highlight
    font-size: 6.25rem
    font-weight: normal
    letter-spacing: -8px
    margin: 50px 0 15px 0

  h2
    font-family: $serif
    font-size: 4.5rem
    letter-spacing: -5px
    margin: 30px 0
    text-align: center

  h3
    font-family: $serif
    font-size: 1.25rem
    letter-spacing: -1px
    margin: 30px 0 10px 0

  h4
    font-family: $serif
    font-size: 1.05rem
    letter-spacing: -0.5px
    margin: 30px 0 10px 0

  /*
   * Lists
   */

  ol, ul
    margin: 20px 0

    li
      margin-bottom: 15px
      margin-left: 20px
      padding-left: 3px

  ol
    list-style-type: decimal

  ul
    list-style-type: disc

  /*
   * Prose
   */

  em
    font-style: italic

  p
    margin: 20px 0

    /* hyphens */
    hyphens: auto
    -moz-hyphens: auto
    -webkit-hyphens: auto

  strong
    font-weight: bold

  /*
   * Article
   */

  .blot
    background: #fff url("/assets/blot.png") no-repeat center center
    height: 100px
    margin: 20px 0 15px 0
    width: 100%

  .brush
    background: #fff url("/assets/brush.png") no-repeat center center
    height: 75px
    margin: 20px 0 15px 0
    width: 100%

  .ring
    background: #fff url("/assets/ring.png") no-repeat center center
    height: 200px
    margin: 40px 0 30px 0
    width: 100%

  .title
    align-items: top
    display: flex
    min-height: 550px
    justify-content: center
    width: 100%

    .title-inner
      h1
        margin: 80px auto 30px auto
        max-width: 700px
        text-align: center
        text-shadow: 0 0 5px #fff

      p.subtitle
        color: $color_highlight
        font-size: 0.75rem
        font-weight: bold
        letter-spacing: -0.5px
        line-height: 1.5em
        margin: 0 auto
        max-width: 300px
        text-align: center
        text-transform: uppercase
        text-shadow: 0 0 2px #fff

  .container
    background: rgba(255, 255, 255, 0.6)
    display: flex
    margin: 0 auto
    padding: 0 20px
    max-width: 800px

    .sidebar
      flex: 1 1 auto
      // Top and bottom margins are for width-constrained layout to position it
      // above main text
      margin: 30px 30px 30px 0
      min-width: 160px

      .toc
        position: -webkit-sticky
        position: sticky

        // Top is required for sticky
        top: 100px

        // h2
        ol
          color: $color_secondary
          font-size: 0.75rem
          font-weight: normal
          line-height: 1.3em
          list-style-type: lower-roman
          margin: 10px 0

          li
            margin-bottom: 8px

            // h3
            ol
              color: $color_secondary
              font-size: 0.65rem
              list-style-type: decimal
              margin: 16px 0

              li
                margin-bottom: 6px

                a
                  color: $color_highlight

                // h4
                ol
                  color: $color_secondary
                  font-size: 0.6rem
                  list-style-type: lower-alpha
                  margin: 14px 0

                  li
                    margin-bottom: 3px

                    a
                      color: $color_primary

          li.collapsed

          li.collapsed > ol
            display: none

        .toc-title
          color: #000
          font-size: 0.7rem
          font-weight: bold
          letter-spacing: -1px
          text-transform: uppercase

    article
      p
        margin: 18px 0

      // next p sibling of h2, and the first letter within it
      h2 + p:first-letter
        color: $color_highlight
        float: left
        font-size: 5.5rem
        font-weight: normal
        line-height: 0.7em
        margin: 5px 10px 0 0

  .footer
    align-items: center
    display: flex
    height: 400px
    justify-content: center
    width: 100%

    .footer-inner
      p
        color: $color_secondary
        max-width: 900px

@media all and (-webkit-min-device-pixel-ratio: 1.5)
  html
    body
      background: #fff url("/assets/mountain-big@2x.png") no-repeat
      background-size: 900px 903px

      // Smaller version -- also looks pretty cool and maybe better
      //background: #fff url("/assets/mountain@2x.png") no-repeat
      //background-size: 600px 602px

    .blot
      background: #fff url("/assets/blot@2x.png") no-repeat center center
      background-size: 50px 100px

    .brush
      background: #fff url("/assets/brush@2x.png") no-repeat center center
      background-size: 281px 75px

    .ring
      background: #fff url("/assets/ring@2x.png") no-repeat center center
      background-size: 200px 200px

// If the window is narrow enough so that the background has significant
// overlap with the title, give the content a semi-opaque white background to
// fade it out a bit so that the page is more legible.
@media handheld, only screen and (max-width: 900px), only screen and (max-device-width: 900px)
  html
    .title
      background: rgba(255, 255, 255, 0.6)

@media handheld, only screen and (max-width: 650px), only screen and (max-device-width: 650px)
  html
    .container
      flex-direction: column
